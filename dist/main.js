(()=>{"use strict";const e=e=>{const t=document.querySelector(e.parent),o=document.querySelector(e.modal),n=document.querySelector(e.overlay);document.querySelector(e.close).addEventListener("click",(()=>{o.style.display="none",n.style.display="none"})),t.addEventListener("click",(t=>{t.preventDefault(),t.target.closest(e.target)&&(o.style.display="block",n.style.display="block")}))},t=e=>{const t=document.querySelector(e.arrowRight),o=document.querySelector(e.arrowLeft),n=document.querySelectorAll(e.items),l=!(window.screen.width>=576);let r=0;if(n[r].parentNode.style.flexWrap="wrap",n[r].parentNode.style.overflow="hidden",n[r].parentNode.style.maxHeight=`${e.rowHeight}px`,l){const t=Math.ceil((window.screen.width-e.itemWidth)/2);n[r].parentNode.style.justifyContent="center",n[r].parentNode.style.padding=`0 ${t}px`}t.addEventListener("click",(()=>{n[r].parentNode.appendChild(n[r]),r=(r+1)%n.length})),o.addEventListener("click",(()=>{n[r].parentNode.insertBefore(n[(r+n.length-1)%n.length],n[r]),r=(r+n.length-1)%n.length}))},o=function(e,t=0){const o=document.querySelectorAll(".count-wrap .count_1 span")[t],n=document.querySelectorAll(".count-wrap .count_2 span")[t],l=document.querySelectorAll(".count-wrap .count_3 span")[t],r=document.querySelectorAll(".count-wrap .count_4 span")[t],a=setInterval((()=>{c()}),1e3);function c(){const t=function(e){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60),l=Math.floor(t/3600%24);return{timeRemaining:t,days:Math.floor(t/3600/24),hours:l,minutes:n,seconds:o}}(e);o.textContent=t.days/10<1?"0"+t.days:t.days,n.textContent=t.hours/10<1?"0"+t.hours:t.hours,l.textContent=t.minutes/10<1?"0"+t.minutes:t.minutes,r.textContent=t.seconds/10<1?"0"+t.seconds:t.seconds,t.timeRemaining<=0&&(o.textContent="00",n.textContent="00",l.textContent="00",r.textContent="00",clearInterval(a))}c()};var n,l;o("22 september 2021"),(()=>{const e=document.querySelector(".smooth-scroll"),t=document.querySelector("#offer"),o=t.offsetTop+t.offsetHeight;document.addEventListener("scroll",(()=>{window.scrollY>o?e.style.display="block":e.style.display="none"})),e.addEventListener("click",(()=>{t.scrollIntoView({block:"start",behavior:"smooth"})}))})(),e({parent:"#header",modal:".header-modal",overlay:".overlay",close:".header-modal__close",target:".btn"}),e({parent:"#services",modal:".services-modal",overlay:".overlay",close:".services-modal__close",target:".service-button"}),t({arrowRight:".benefits__arrow--right",arrowLeft:".benefits__arrow--left",items:".benefits__item",rowHeight:191,itemWidth:195}),t({arrowRight:".services__arrow--right",arrowLeft:".services__arrow--left",items:".services__item",rowHeight:280,itemWidth:545}),o("20 september 2021",1),(()=>{const e=/[^0-9]/,t=document.querySelector("#calc-input");t.oninput=()=>{t.value=t.value.replace(e,"")};const o=/[^А-Яа-яЁёA-Za-z\s-]/g;document.querySelectorAll('[name="fio"]').forEach((e=>{e.oninput=()=>{e.value=e.value.replace(o,"")},e.onchange=()=>{e.value=e.value.replace(/ +/g," ").trim(),e.value=e.value.replace(/- /g,"-"),e.value=e.value.replace(/ -/g,"-"),e.value=e.value.replace(/-+/g,"-");const t=e.value;let o="";for(let e=0;e<t.length;e++){if(0===e||e===t.length-1){if("-"===t[e])continue;if(0===e){o=t[e].toLocaleUpperCase();continue}}" "===t[e-1]||"-"===t[e-1]?o+=t[e].toLocaleUpperCase():o+=t[e].toLocaleLowerCase()}e.value=o}}));const n=/[^0-9\(\)-\+\)\()]/g;document.querySelectorAll('[name="phone"]').forEach((e=>{e.oninput=()=>{e.value=e.value.replace(n,"")}}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="font-size: 1rem; color: red;";const o=document.createElement("img");let n;e.forEach((e=>{const l=e.querySelectorAll("input");e.addEventListener("submit",(r=>{r.preventDefault();const a=e.querySelector("button");if(a.parentNode.insertBefore(t,a),t.textContent="",(e=>{let t=!0;return e.forEach((e=>{if(e.value.length<2)e.style.border="2px solid red",console.log("Ошибка длины: "+e.value.length),t=!1;else if(e.closest("[name=phone]")){const o=e.value;let n=0;for(let e=0;e<o.length;e++)"+"!==o[e]&&"-"!==o[e]&&"("!==o[e]&&")"!==o[e]&&n++;11!==n?(e.style.border="2px solid red",console.log("Ошибка: цифр "+n),t=!1):e.style.border="1px solid #dfdfdf"}else e.style.border="1px solid #dfdfdf"})),t})(l)){(e=>{let t;o.style.cssText="display: block; position: fixed; \n        top: calc(50% - 80px); left: calc(50% - 80px); width: 160px;",o.setAttribute("src","./images/loading.png"),e.appendChild(o);const l=()=>{n=requestAnimationFrame(l),t-=5,o.style.transform=`rotate(${t}deg)`};t=360,o.style.transform=`rotate(${t}deg)`,n=requestAnimationFrame(l)})(e);const r=new FormData(e),c={};r.forEach(((e,t)=>{c[t]=e})),"balkony"===document.querySelector("body").getAttribute("class")&&document.getElementById("calc-total").value>0&&(c["calc-total"]=document.getElementById("calc-total").value),(e=>fetch("./server.php",{method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-type":"aplication/json"},redirect:"follow",referrer:"client",body:JSON.stringify(e)}))(c).then((e=>{if(200!==e.status)throw new Error("status network not 200");cancelAnimationFrame(n),o.remove(),t.textContent="Отлично! Ответ получен!!!",setTimeout((()=>{t.remove();const e=document.querySelector(".overlay"),o=a.closest(".header-modal"),n=a.closest(".services-modal");n&&(n.style.display="none"),o&&(o.style.display="none"),e.style.display="none"}),2500),l.forEach((e=>{"hidden"===!e.type&&(e.value="")})),a.textContent="Успешно отправлено",a.disabled=!0})).catch((e=>{t.textContent="Ошибка отправки формы",console.error(e)}))}else t.textContent="Поле заполнено неверно"}))}))})(),n=565,l=400,document.getElementById("documents").addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("a").getAttribute("href");if(t){const e=document.createElement("img"),o=document.createElement("div"),r=document.querySelector(".overlay");e.setAttribute("src",t),e.style.cssText=`width: ${l}px; margin: auto;`,r.appendChild(e),o.style.cssText=`background: white; border-radius: 22px; padding: 6px; \n            cursor: pointer; width: 40px; height: 40px; font-size: 40px; color: #0c484a; \n            position: fixed; top: calc(50% - ${n/2+11}px); bottom: 0; \n            left:  calc(50% + ${l/2-30}px); right: 0; z-index: 101;`,o.textContent="✘",r.appendChild(o),r.style.display="flex",o.addEventListener("click",(()=>{r.style.display="none",e.remove(),o.remove()}))}})),(()=>{if("balkony"!==document.querySelector("body").getAttribute("class"))return;const e=document.getElementById("calc-type"),t=document.getElementById("calc-type-material"),o=document.getElementById("calc-input"),n=document.getElementById("calc-total");document.getElementById("calc").addEventListener("change",(l=>{const r=l.target;r!==e&&r!==t&&r!==o||("--"!==e.value&&"--"!==t.value&&o.value>0?n.value=Math.round(+e.value*+t.value*+o.value*1e3):n.value="")}))})()})();